<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
    <title>marker AR</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin:0px; overflow:hidden;">
    <a-scene embedded arjs>
      <a-marker preset="hiro">
            <a-entity>
                <a-plane 
                    id="character" 
                    src="character-image.png" position="0 0.02 0"         rotation="-90 0 0"          width="1" 
                    height="1"
                    cursor-listener> 
                    
                    <a-animation 
                        id="zoom-in-anim"
                        attribute="scale" 
                        to="1.5 1.5 1.5" 
                        dur="500"                    
                        easing="easeOutQuad"
                        begin="click"           end="zoom-in-complete"      
                        fill="forwards">
                    </a-animation>
                    
                    <a-animation 
                        id="hop-anim"
                        attribute="position" 
                        to="0 0.5 0"                dur="200"                    
                        direction="alternate"        
                        repeat="2"                   
                        easing="easeInOutQuad"
                        begin="zoom-in-complete"     
                        end="hop-complete">
                    </a-animation>
                    
                    <a-animation 
                        id="zoom-out-anim"
                        attribute="scale" 
                        to="1 1 1"                    
                        dur="300"
                        easing="easeOutQuad"
                        begin="hop-complete"          
                        fill="forwards">
                    </a-animation>
                </a-plane>
            </a-entity>
        </a-marker>
        
        <a-entity camera></a-entity>
    </a-scene>
    
    <script>
        // アニメーションのシーケンスを制御するJavaScript (元のコードと同じロジック)
        document.addEventListener('DOMContentLoaded', function () {
            const character = document.getElementById('character');
            
            // スケールアニメーションの完了イベントハンドラを設定
            character.addEventListener('animationcomplete', function(event) {
                if (event.detail.name === 'animation__zoom-in-anim') {
                    // ズームイン完了後、ホップアニメーションを開始
                    character.emit('zoom-in-complete');
                } else if (event.detail.name === 'animation__hop-anim') {
                    // ホップ完了後、ズームアウトアニメーションを開始
                    character.emit('hop-complete');
                }
            });
        });
    </script>
</body>
</html>

